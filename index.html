<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>$PUMPKER</title>
  <meta property="og:title" content="$PUMPKER" />
  <meta property="og:site_name" content="$PUMPKER" />
  <meta name="twitter:title" content="$PUMPKER" />
  <meta name="twitter:card" content="summary" />
  <link rel="icon" href="data:image/svg+xml,%3Csvg%20xmlns%3D%27http%3A//www.w3.org/2000/svg%27%20viewBox%3D%270%200%2064%2064%27%3E%3Crect%20width%3D%2764%27%20height%3D%2764%27%20fill%3D%27%23084042%27/%3E%3Ctext%20x%3D%2750%25%27%20y%3D%2750%25%27%20dy%3D%27.3em%27%20text-anchor%3D%27middle%27%20font-size%3D%2744%27%20font-family%3D%27Inter%2CArial%2CHelvetica%2Csans-serif%27%20fill%3D%27%23ffffff%27%3E%24%3C/text%3E%3C/svg%3E">
  <meta name="description" content="Ultra‑simple one‑page video poker with adjustable bet, credits, pay table, and five card slots." />
  <style>
    :root{
      --blue:#084042;            /* deep retro blue */
      --white:#ffffff;
      --ui:#ff3b30;              /* action red */
      --ui-press:#c62c24;
      --card:#f4f6fb;
      --ink:#0b1020;
      --muted:#94a3b8;
      --gap:14px;
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0;
      background:var(--blue);
      color:var(--white);
      font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
      letter-spacing: .5px;
      display:flex;
      align-items:stretch;
      justify-content:center;
    }
    .wrap{
      width:min(1100px, 100%);
      padding:24px 18px 30px;
      display:grid;
      grid-template-columns: minmax(260px, 0.6fr) minmax(820px, 1.4fr);
      gap: 24px;
    }
    /* PAYTABLE (left) */
    .paytable{
      border:3px solid var(--white);
      padding:18px 16px;
      border-radius:10px;
      min-height: 360px;
      position:relative;
    }
    .paytable h2{
      margin:0 0 8px 0;
      font-size:20px;
      letter-spacing:1.2px;
    }
    .payout-row{
      display:flex;
      align-items:center;
      justify-content:space-between;
      padding:8px 4px;
      border-bottom:1px dashed rgba(255,255,255,.25);
      font-size:20px;
    }
    .payout-row:last-child{border-bottom:0}
    .payout-name{font-weight:700}
    .payout-amt{min-width:72px; text-align:right; font-weight:800}
    .small-note{color:rgba(255,255,255,.7); font-size:12px; margin-top:6px}
    /* RIGHT SIDE (status + controls) */
    .status{
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:10px;
      margin-bottom:12px;
    }
    .stat{
      background:rgba(255,255,255,.12);
      border:2px solid var(--white);
      padding:10px 12px;
      border-radius:10px;
      display:flex;
      align-items:center;
      gap:10px;
      font-size:18px;
      font-weight:800;
      min-width: 130px;
      justify-content:space-between;
    }
    .stat .label{opacity:.85}
    .stat .value{font-weight:900; font-size:20px}
    /* CARD STRIP */
    .table{
      border:3px solid var(--white);
      border-radius:14px;
      padding:14px;
      display:flex;
      align-items:flex-start;
      gap:14px;
      flex-wrap:wrap;
      background:rgba(255,255,255,.06);
    }
    .cards{
      display:flex;
      gap:12px;
      flex:1;
      min-width: 540px;
    }
    .card{
      width:150px;
      height:210px;
      background:var(--card);
      color:var(--ink);
      border-radius:16px;
      border:6px solid var(--white);
      box-shadow: 0 2px 0 rgba(0,0,0,.25);
      display:grid;
      grid-template-rows: auto 1fr auto;
      padding:10px;
      text-align:center;
      user-select:none;
    }
    .card .rank{font-size:36px; font-weight:900; line-height:1}
    .card .suit{font-size:42px; font-weight:900; line-height:1.2}
    .card .corner{
      font-size:18px; font-weight:800;
      opacity:.9;
    }
    .controls{
      display:flex;
      flex-direction:column;
      align-items:stretch;
      gap:10px;
      width: 220px;
      min-width:220px;
    }
    .bet-stepper{
      display:grid;
      grid-template-columns: 1fr 1fr 1fr;
      align-items:center;
      gap:10px;
    }
    .bet-display{
      background:rgba(255,255,255,.12);
      border:2px solid var(--white);
      border-radius:10px;
      text-align:center;
      padding:10px 6px;
      font-weight:900;
      font-size:20px;
    }
    button{
      appearance:none;
      border:none;
      background:var(--ui);
      color:var(--white);
      padding:12px 14px;
      font-weight:900;
      border-radius:12px;
      cursor:pointer;
      letter-spacing:1px;
      box-shadow: 0 4px 0 var(--ui-press);
      transition: transform .02s ease, box-shadow .02s ease, filter .2s ease;
    }
    button:hover{filter:brightness(1.05)}
    button:active{transform: translateY(2px); box-shadow: 0 2px 0 var(--ui-press);}
    .btn-ghost{
      background:transparent;
      box-shadow:none;
      border:2px solid var(--white);
    }
    .btn-square{aspect-ratio:1/1}
    .stack{
      display:flex; flex-direction:column; gap:10px;
    }
    .notice{
      min-height: 28px;
      font-weight:800;
      letter-spacing:.6px;
      margin-top:6px;
    }
    .win{color:#00ff9d}
    .lose{color:#ffd166}
    .muted{color:var(--muted)}
    /* footer */
    footer{
      margin-top: 8px;
      font-size:12px;
      opacity:.8;
      text-align:center;
    }
    /* Responsive tweaks */
    @media (max-width: 980px){
      .wrap{grid-template-columns: 1fr}
      .controls{width:100%; min-width:unset}
      .cards{min-width: unset; width:100%; justify-content:space-between}
      .card{width:18.5vw; max-width:160px; height: 26vw; max-height:220px}
      .paytable{order:2}
    }
  
    /* --- Brand header (added) --- */
    .brand{
      position: fixed;
      top: 0; left: 0; right: 0;
      height: 56px;
      display: flex;
      align-items: center;
      justify-content: center;
      color: var(--white);
      font-weight: 900;
      font-size: 28px;
      line-height: 1;
      letter-spacing: 1.6px;
      text-transform: uppercase;
      text-shadow: 0 2px 0 rgba(0,0,0,.25);
      font-family: ui-sans-serif, system-ui, -apple-system, "Segoe UI", Roboto, Inter, "Helvetica Neue", Arial, "Noto Sans", "Liberation Sans", sans-serif;
      z-index: 1000;
    }
    /* add top padding so content isn't hidden under the fixed header */
    body{ padding-top: 72px; }

  
    /* --- Logo sizing & layout (added) --- */
    .brand { gap: 10px; } /* ensure space between logo and wordmark */
    .brand .logo{
      height: 2em;          /* match computed font-size */
      width: auto;
      display: block;       /* crisp sizing in flex */
    }
    .brand .wordmark{ line-height: 1; }
</style>
</head>
<body>
  <header class="brand" role="banner"><img src="pumpker.png" alt="$PUMPKER logo" class="logo" loading="eager"><span class="wordmark">$PUMPKER</span></header>
  <main class="wrap">
    <!-- LEFT: PAY TABLE -->
    <section class="paytable" aria-labelledby="paytableTitle">
      <h2 id="paytableTitle">PAY TABLE</h2>
      <div id="payRows"><!-- rows injected --></div>
      <div class="small-note">Payouts update with your current bet.</div>
    </section>

    <!-- RIGHT: STATUS + TABLE + CONTROLS -->
    <section>
      <div class="status">
        <div class="stat" aria-live="polite" aria-atomic="true"><span class="label">CREDITS</span> <span id="credits" class="value">500</span></div>
        <div class="stat"><span class="label">BET</span> <span id="betTop" class="value">1</span></div>
      </div>

      <div class="table">
        <div class="cards" id="cards" aria-label="Five card slots">
          <!-- 5 placeholder cards -->
        </div>

        <div class="controls">
          <div class="stack">
            <div class="bet-stepper" role="group" aria-label="Adjust bet">
              <button id="minus" class="btn-ghost btn-square" aria-label="Decrease bet">−</button>
              <div id="betDisplay" class="bet-display" aria-live="polite" aria-atomic="true">1</div>
              <button id="plus" class="btn-ghost btn-square" aria-label="Increase bet">+</button>
            </div>
            <button id="placeBet">PLACE BET</button>
            <button id="reset" class="btn-ghost">RESET CREDITS</button>
            <div id="message" class="notice muted">Place a bet to draw.</div>
          </div>
        </div>
      </div>
      
    </section>
  </main>

<script>
  // ---------- CONFIG ----------
  const START_CREDITS = 500;
  const MIN_BET = 1;
  const BASE_PAYOUTS = [
    { key: 'royal_flush',    name: 'ROYAL FLUSH',     mult: 750 },
    { key: 'straight_flush', name: 'STRAIGHT FLUSH',  mult: 150 },
    { key: 'four_kind',      name: '4 OF A KIND',     mult: 240 },
    { key: 'full_house',     name: 'FULL HOUSE',      mult: 21  },
    { key: 'flush',          name: 'FLUSH',           mult: 15  },
    { key: 'straight',       name: 'STRAIGHT',        mult: 12  },
    { key: 'three_kind',     name: '3 OF A KIND',     mult: 9   },
    { key: 'two_pair',       name: 'TWO PAIRS',       mult: 6   },
    { key: 'jacks_or_better',name: 'JACKS OR BETTER', mult: 3   },
  ];
  const SUITS = ['♠','♥','♦','♣']; // spade, heart, diamond, club
  const RANKS = ['2','3','4','5','6','7','8','9','10','J','Q','K','A'];
  const RANK_VALUE = Object.fromEntries(RANKS.map((r,i)=>[r, i+2]));

  // ---------- STATE ----------
  let credits = Number(localStorage.getItem('vp_credits')) || START_CREDITS;
  let bet = 1;
  let deck = [];

  // ---------- DOM ----------
  const $credits = document.getElementById('credits');
  const $betTop = document.getElementById('betTop');
  const $betDisplay = document.getElementById('betDisplay');
  const $minus = document.getElementById('minus');
  const $plus = document.getElementById('plus');
  const $placeBet = document.getElementById('placeBet');
  const $reset = document.getElementById('reset');
  const $message = document.getElementById('message');
  const $cards = document.getElementById('cards');
  const $payRows = document.getElementById('payRows');

  // ---------- INIT UI ----------
  function makePayTable(){
    $payRows.innerHTML = '';
    for(const row of BASE_PAYOUTS){
      const div = document.createElement('div');
      div.className = 'payout-row';
      div.innerHTML = `<span class="payout-name">${row.name}</span><span class="payout-amt" id="payout-${row.key}">0</span>`;
      $payRows.appendChild(div);
    }
  }
  function makeCards(){
    $cards.innerHTML = '';
    for(let i=0;i<5;i++){
      const c = document.createElement('div');
      c.className='card';
      c.innerHTML = `<div class="corner rank">?</div>
                     <div class="suit">•</div>
                     <div class="corner">?</div>`;
      $cards.appendChild(c);
    }
  }

  // ---------- UTIL ----------
  function shuffle(array){
    for(let i = array.length - 1; i > 0; i--){
      const j = Math.floor(Math.random()*(i+1));
      [array[i], array[j]] = [array[j], array[i]];
    }
    return array;
  }
  function buildDeck(){
    const d = [];
    for(const s of SUITS){
      for(const r of RANKS){
        d.push({r,s});
      }
    }
    return shuffle(d);
  }
  function draw(n=5){
    if(deck.length < n) deck = buildDeck();
    return deck.splice(0,n);
  }
  function setCredits(val){
    credits = Math.max(0, Math.floor(val));
    localStorage.setItem('vp_credits', String(credits));
    $credits.textContent = credits;
    // clamp bet if needed
    if(bet > credits) setBet(Math.max(MIN_BET, credits));
  }
  function setBet(val){
    bet = Math.max(MIN_BET, Math.min(Math.floor(val), Math.max(MIN_BET, credits)));
    $betDisplay.textContent = bet;
    $betTop.textContent = bet;
    updatePayouts();
  }
  function updatePayouts(){
    for(const row of BASE_PAYOUTS){
      const amt = row.mult * bet;
      const cell = document.getElementById('payout-'+row.key);
      if(cell) cell.textContent = String(amt);
    }
  }
  function renderHand(cards){
    const els = $cards.querySelectorAll('.card');
    cards.forEach((c, i)=>{
      const el = els[i];
      const color = (c.s==='♥' || c.s==='♦') ? '#e11d48' : '#111827';
      el.style.color = '#0b1020';
      el.querySelector('.rank').textContent = c.r;
      el.querySelector('.suit').textContent = c.s;
      el.querySelector('.corner:last-child').textContent = c.r + c.s;
      el.style.setProperty('--card-ink', color);
      el.style.color = color;
    });
  }

  // ---------- HAND EVAL (Jacks or Better) ----------
  function evaluateHand(cards){
    // counts
    const ranks = cards.map(c => RANK_VALUE[c.r]).sort((a,b)=>a-b);
    const suits = cards.map(c => c.s);
    const isFlush = suits.every(s => s === suits[0]);

    // straight check (handle A-low)
    let isStraight = false;
    let high = Math.max(...ranks);
    const uniq = [...new Set(ranks)];
    if(uniq.length === 5){
      if(high - Math.min(...ranks) === 4){
        isStraight = true;
      }else if(JSON.stringify(uniq) === JSON.stringify([2,3,4,5,14])){
        isStraight = true;
        high = 5; // treat A as low
      }
    }

    const freq = {};
    for(const v of ranks) freq[v] = (freq[v]||0)+1;
    const groups = Object.values(freq).sort((a,b)=>b-a); // e.g., [3,2]
    const has4 = groups[0]===4;
    const has3 = groups[0]===3;
    const pairs = groups.filter(g=>g===2).length;

    // determine result
    let key = null;
    if(isStraight && isFlush){
      // royal if 10,J,Q,K,A (high=14) and includes 10
      if(high===14 && ranks.includes(10)) key = 'royal_flush';
      else key = 'straight_flush';
    }else if(has4){
      key = 'four_kind';
    }else if(has3 && pairs===1){
      key = 'full_house';
    }else if(isFlush){
      key = 'flush';
    }else if(isStraight){
      key = 'straight';
    }else if(has3){
      key = 'three_kind';
    }else if(pairs===2){
      key = 'two_pair';
    }else if(pairs===1){
      // detect high pair (Jacks or Better)
      const pairRank = Number(Object.keys(freq).find(k => freq[k]==2));
      if(pairRank>=11 || pairRank===14) key = 'jacks_or_better';
    }
    return key; // null if no win
  }

  // ---------- INTERACTION ----------
  $minus.addEventListener('click', ()=> setBet(bet - 1));
  $plus.addEventListener('click', ()=> setBet(bet + 1));

  $reset.addEventListener('click', ()=>{
    setCredits(START_CREDITS);
    setBet(1);
    $message.textContent = 'Credits reset.';
    $message.className = 'notice';
  });

  $placeBet.addEventListener('click', ()=>{
    if(credits < bet){
      $message.textContent = 'Not enough credits.';
      $message.className = 'notice lose';
      return;
    }
    setCredits(credits - bet);
    const hand = draw(5);
    renderHand(hand);
    const winKey = evaluateHand(hand);

    if(winKey){
      const row = BASE_PAYOUTS.find(r=>r.key===winKey);
      const payout = row.mult * bet;
      setCredits(credits + payout);
      $message.textContent = `WIN — ${row.name} (+${payout})`;
      $message.className = 'notice win';
    }else{
      $message.textContent = 'No win. Try again!';
      $message.className = 'notice lose';
    }
  });

  // ---------- BOOT ----------
  (function boot(){
    makePayTable();
    makeCards();
    setCredits(credits);
    setBet(1);
    updatePayouts();
  })();
</script>
</body>
</html>
